{% form 'product', product, class:form_classes, novalidate: 'novalidate', data-product-form: '' %}
<div id="productCartWrap" class="comp-cart-wrap">
{%- if product.type != "upcoming" and product.type != "archive" and product.metafields.custom_fields["stock_state"] != 1 -%}
  <div class="order_lot">
    <span class="title">数量</span>
    <div id="quantityWrap" class="input_wrap number">
      <button id="minusButton" class="minus">-</button>
      <input id="quantityInput" type="text" class="product_init_num" name="quantity" min="1" value="1">
      <button id="plusButton" class="plus">+</button>
    </div>
  </div><!-- order_lot -->
{%- endif -%}
  <div class="submit_button">
    <div class="cart_box">
    {%- if product.type == "gift" and product.handle != "k0026" and product.handle != "k0050" and product.handle != 'k0057' and product.metafields.custom_fields["stock_state"] != 1 -%}
      <div id="optionSelect" class="cart_item">
        <span class="button_wrap">
          <span class="title cart_in">オプションを選択して購入</span>
          <span class="sub_text">5,500円以上(税込)お買い上げで送料無料</span>
        </span>
      </div><!-- cart_item -->
      <p class="dervery_schedule">最短で{% include 'delivery-shcedule' %}にお届け致します</p>
      <input class="product_cart_btn button" type="submit" value="カートに入れる" style="display: none">
    {%- else -%}
    {%- if product.type != "upcoming" and product.type != "archive" and product.type != "roommist" and product.metafields.custom_fields["stock_state"] != 1 -%}
    {%- assign index = 0 -%}
    <select name="id" id="ProductSelect-product-template" style="display: none; opacity:0; height:0; overflow: hidden;">
    {% for variant in product.variants %}
      {%- assign index = index | plus: 1 -%}
      <option id="label{{index}}" value="{{ variant.id }}" cPrice="{{ variant.compare_at_price | money }}" {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %}> {{ variant.title }}</option>
    {% endfor %}
    </select>
    <div class="cart_item">
      <span class="button_wrap">
        <span class="title cart_in">カートに入れる</span>
        <span class="sub_text">5,500円以上(税込)お買い上げで送料無料</span>
      </span>
      <input id="cartSubmit" class="product_cart_btn button" type="submit" value="カートに入れる" style="bottom: unset;  height: 90px;">
    </div><!-- cart_item -->
    <p class="dervery_schedule">最短で{% include 'delivery-shcedule' %}にお届け致します</p>
    {%- else -%}
    {%- if product.metafields.custom_fields["stock_state"] == 1 -%}
    <div class="out_of_stock">SOLD OUT</div>
    {%- endif -%}
    <div class="comp-waiting-button">
       <a href="https://journal.komons-japan.com/waiting-list/{{product.handle}}" {%- if product.type == "archive" -%}style="pointer-events: none;"{%- endif -%}>
         {%- if product.type != "archive" and product.type != "roommist" -%}
         <span class="title">Waiting Listに登録</span>
         {%- if product.type != "upcoming" -%}
         <span class="desc">4月28日(木)販売再開予定</span>
         {%- else -%}
         <span class="desc">発売時にメールにてお知らせいたします</span>
         {%- endif -%}
         {%- else -%}
         {%- if product.type != "roommist" -%}
         <span class="title">完売商品</span>
         {%- else -%}
         <span class="title">8/1(月)販売開始</span>
         {%- endif -%}
         {%- endif -%}
       </a>
     </div><!-- waiting-button -->
    {%- endif -%}
    {%- endif -%}
    </div>
    {%- if product.type != "upcoming" -%}
    <div id="cartNoteList" class="comp-cart-note cart_note">
      {%- if product.type == "gift" -%}
      <button prop="#toggleGift">ギフトサービス</button>
      {%- endif -%}
      <button prop="#toggleDelivary">配送について</button>
      <button prop="#togglePayment">お支払い方法</button>
    </div><!-- cart_note -->
    {%- endif -%}
  </div><!-- comp-flex-cart -->
</div><!-- comp-cart-wrap -->
{% endform %}
