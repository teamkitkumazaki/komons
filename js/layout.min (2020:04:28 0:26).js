$(function(){function d(){var t="https://journal.komons-japan.com/wp-content/themes/komons-theme/img/main_slide01.jpg";var u=new Image();var v=$(".first_view");var w=v.attr("src");v.attr("src","");console.log(w);v.on({load:function(){setTimeout(function(){$(".load_inner").addClass("delete");$("body").addClass("loaded");setTimeout(function(){$(".slide_fil").addClass("loaded");setTimeout(function(){$(".main_img").addClass("loaded");$(".main_ttl").addClass("loaded");p($("#sliderBtn"))},100)},1200)},1700)}});v.attr("src",w)}if(document.getElementById("index")){d()}function s(w){var A=0;var u=$("#arrowScroll a");var y=$(".header_arrow");var z=$("#scrollTarget");function v(D){w.addClass("rolled");y.attr("id","arrowReturn");A=1}function x(){if($(".underPage").length){}else{w.removeClass("rolled");y.attr("id","arrowScroll");A=0}}function B(){if(A==0){$("html, body").animate({scrollTop:1100},700)}else{$("html, body").animate({scrollTop:0},1000)}}function t(){var D=z.offset().top;if(A==0){$("html, body").animate({scrollTop:D},700)}else{$("html, body").animate({scrollTop:0},1000)}}function C(){$(".header_arrow a").on({click:function(){if(document.getElementById("top")){B()}else{t()}}});$(window).on({scroll:function(){var D=$(window).scrollTop();if(D>100){if(A==0){v()}}else{if(A==1){x()}}if(document.getElementById("concept")){$("section").each(function(){var E=$(this).offset().top;var F=$(window).scrollTop();var H=$(window).height();if(F+90>E-H+H){var G=$(this).attr("id");$("body").removeClass("concept_top concept_component concept_scent concept_make concept_design ceoncept_links");$("body").addClass(G)}})}if(document.getElementById("index")){$("section").each(function(){var E=$(this).offset().top;var F=$(window).scrollTop();var H=$(window).height();if(F+90>E-H+H){var G=$(this).attr("id");$("body").removeClass("main topConcept product01 product02 product03 product04 product05 product06 topGift topCF topJournal instagram");$("body").addClass(G)}});$(".effect").each(function(){var G=$(this).offset().top;var E=$(window).scrollTop();var H=$(window).height();if(E>G-H+H/5){var F=$(this).attr("animate");$(this).css({opacity:"1"});$(this).addClass(F)}})}}})}C()}s($("body"));function l(y){var x=y.find("a");var w=$("#closeBtn");var u=$("#menuBg");var A=0;var t;function v(){if(A==0){t=$(window).scrollTop();$("body").addClass("menu_open").css({width:"100%"});A=1}else{$("body").removeClass("menu_open").attr({style:""}).prop({scrollTop:t});A=0}}function z(){x.on({click:function(){v()}});w.on({click:function(){v()}});u.on({click:function(){v()}})}z()}l($("#humMenu"));function p(C){var B=$("#slideShow");var G=$("#slideShow li");var J;var w;var y=2000;var v=2000;var D=1;var z=[];var x=[];function E(){if(D!==1){D++}else{D=0}A(D)}function H(){w=setTimeout(E,v)}function F(){clearTimeout(w)}function t(){H()}function A(K){$(".active").removeClass("active");x[K].addClass("active");G.stop().animate({opacity:0},y);z[K].stop().animate({opacity:1},y,function(){t();D=K})}function u(K){if(D!=K){A(K);F()}}function I(){C.find("li").each(function(K){console.log(K);x[K]=$(this);$($(this).find("a")).on({click:function(){u(K)}})});B.find("li").each(function(K){z[K]=$(this)})}I();H()}if(document.getElementById("index")){}function b(u){var t=u.html();$("#excerpt").prepend(t);u.remove()}if(document.getElementById("itemDetail")){b($("#leadTxt"))}function k(w){var x=0;var t=w.find(".variation_wrap");var u=w.find(".display_wrap");var y=u.outerHeight();var v=w.find(".display_toggle");var B=v.outerHeight();function A(){var E=u.outerHeight();var C=v.outerHeight();if(x==0){var D=E+C;u.addClass("open");x=1}else{var D=E;u.removeClass("open");x=0}t.css({height:D+"px"})}function z(){t.css({height:y+"px"});u.on({click:function(){A()}})}z()}if(document.getElementById("variationToggle")){k($("#variationToggle"))}function a(u){var x=document.getElementById("cat");var t=[];function w(){var z=x.value;if(document.getElementById("itemList")){var y="https://www.komons-japan.com"+z+"#products"}else{if(document.getElementById("itemDetail")){var y="https://www.komons-japan.com"+z}}console.log(z);if(z!=="undefined"){location.href=y}}function v(){var z=location.hash;if(0<z.length){var y=$(z).offset().top;var C=$(window).width();if(C>1100){var A=y-100}else{var A=y-100}$("html, body").animate({scrollTop:A},0)}var B=location.search;$.each(u.find(".option-1"),function(D){t[D]=$(this).attr("links");if(t[D]=B){console.log(t[D]);u.val(t[D])}});u.change(function(){console.log("change");w()})}v()}if(document.getElementById("itemList")){a($("#cat"))}if(document.getElementById("itemDetail")){a($("#cat"))}window.onload=function(){var v=location.hash;if(0<v.length){location.hash=v;var t=$(v).offset().top;var u=$(window).width();if(u>1100){var x=t-100}else{var x=t-60}$("html, body").animate({scrollTop:x},0)}};function f(v){var u=[];function t(A){var x=$(window).width();console.log(u[A]);var z=$(u[A]).offset().top;if(x>1100){var y=z-100}else{var y=z-60}$("html, body").animate({scrollTop:y},500);return false}function w(){$.each(v.find("li a"),function(x){$(this).attr("href","javascript:void(0);");u[x]=$(this).attr("jump");$(this).on({click:function(){t(x)}})})}w()}if(document.getElementById("faq")){f($(".fmenu02"));f($("#guideNav"))}function q(x){var v=[];var w=[];var t=[];var u=[];function z(C){if(u[C]==-1||u[C]==0){w[C].addClass("active");var A=t[C].height();v[C].css({height:110+A+"px"});u[C]=1}else{w[C].removeClass("active");var B=w[C].outerHeight();v[C].css({height:B+4+"px"});u[C]=0}}function y(){$.each(x.find(".toggle_item"),function(A){v[A]=$(this);w[A]=$(this).find(".toggle_button");t[A]=$(this).find(".toggle_contents");$(this).css({height:w[A].outerHeight()+4+"px"});u[A]=-1;w[A].on({click:function(){z(A)}})})}y()}if(document.getElementById("faq")){q($("article"))}if(document.getElementById("gift")){q($("article"))}function c(u){function t(){var z=$("#giftOption").offset().top;var x=$(window).width();if(x>1100){var y=z-100}else{var y=z-60}$("html, body").animate({scrollTop:y},500)}function v(){u.on({click:function(){t()}})}v()}if(document.getElementById("gift")){c($("#jumpButton"))}function h(v){var u=[];var t=[];function w(){v.find("form").each(function(x){t[x]=$(this);t[x].attr("id","form"+x);u[x]=$(this).find(".cartjs_cart_in").find("input");u[x].attr("onclick","gtag_report_conversion2("+x+"); return false;");u[x].on({click:function(){return false;gtag_report_conversion2(x)}})})}w()}if(document.getElementById("gift")){h($("#productList"))}function g(t){console.log("topHeader");function u(){t.addClass("fade")}u()}if(document.getElementById("index")){g($("#hLogo"))}function j(u){var w=0;function t(){if(w==0){u.removeClass("close");u.addClass("open");w=1}else{u.removeClass("open");u.addClass("close");w=0}}function v(){u.on({click:function(){t()}});$("#indexContent li a").on({click:function(){t()}})}v()}if(document.getElementById("concept")){j($("#popButton"))}function i(t){$("input").each(function(){$(this).attr("autocomplete","off")});$(".wpcf7-submit").on({click:function(){$("#confirmButton").addClass("wpcf7c-force-hide")}})}if(document.getElementById("contact")){i($("form"))}function o(y,z){var u=$(y);var w=$(z);if(w.length==0||u.length==0){return}var t=u.offset().top;var A=35;var v=$("header:first").height();var x=w.height();$(window).on("scroll load resize",function(){var B=$(window).scrollTop();if(B+v>=t){u.css("position","fixed");if(B>x){u.css("top",(v-(B-x))+"px")}else{u.css("top",v+"px")}}else{t=u.offset().top;u.css("position","absolute");u.css("top",$("#js_concept_kv").height())}})}o("#js_concept_sidebar","#concept");function n(){$('a[href^="#"]').click(function(){var t=$(this).attr("href");return r(t)})}function r(v){if(v!="#"&&v!=""){var u=$("header:first").height();var y=$(v);var x=50;var t=y.offset().top-u-x;$("html, body").animate({scrollTop:t},300,"swing")}var w=location.href.split("#");if(w.length>1){history.replaceState("","",location.pathname)}return false}n();function e(u,w){var t=$("header:first").height()+180;$(window).on("scroll load",function(){var B=$(window).scrollTop();for(var z in u){var x=u[z];$target=$(x);if($target.length==0){continue}var A=$target.offset().top;if(B+t>A){var y=$("a[href='"+x+"']").closest("li");y.siblings().removeClass("current");y.addClass("current")}}});for(var v in u){$("a[href='"+u[v]+"']").click(function(){$(w).hide()})}}e(["#concept_top","#concept_component","#concept_scent","#concept_make","#concept_design"],"#js_concept_index_sp");function m(){$(".js_toggle_btn").click(function(){var t=$($(this).data("target"));if(t.is(":visible")){t.fadeOut(100);$(this).find(".-txt_opened").show();$(this).find(".-txt_closed").hide()}else{t.fadeIn(100);$(this).find(".-txt_opened").hide();$(this).find(".-txt_closed").show()}})}m()});
