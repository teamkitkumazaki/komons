$(function(){function d(){var w="https://journal.komons-japan.com/wp-content/themes/komons-theme/img/main_slide01.jpg";var x=new Image();var y=$(".first_view");var z=y.attr("src");y.attr("src","");y.on({load:function(){setTimeout(function(){$(".load_inner").addClass("delete");$("body").addClass("loaded");setTimeout(function(){$(".slide_fil").addClass("loaded");setTimeout(function(){$(".main_img").addClass("loaded");$(".main_logo").addClass("loaded");r($("#sliderBtn"))},100)},1200)},1700)}});y.attr("src",z)}if(document.getElementById("index")){d()}function v(z){var D=0;var x=$("#arrowScroll a");var B=$(".header_arrow");var C=$("#scrollTarget");function y(G){z.addClass("rolled");B.attr("id","arrowReturn");D=1}function A(){if($(".underPage").length){}else{z.removeClass("rolled");B.attr("id","arrowScroll");D=0}}function E(){if(D==0){$("html, body").animate({scrollTop:1100},700)}else{$("html, body").animate({scrollTop:0},1000)}}function w(){var G=C.offset().top;if(D==0){$("html, body").animate({scrollTop:G},700)}else{$("html, body").animate({scrollTop:0},1000)}}function F(){$(".header_arrow a").on({click:function(){if(document.getElementById("top")){E()}else{w()}}});$(window).on({scroll:function(){var G=$(window).scrollTop();if(G>100){if(D==0){y()}}else{if(D==1){A()}}if(document.getElementById("concept")){$("section").each(function(){var H=$(this).offset().top;var I=$(window).scrollTop();var K=$(window).height();if(I+90>H-K+K){var J=$(this).attr("id");$("body").removeClass("concept_top concept_component concept_scent concept_make concept_design ceoncept_links");$("body").addClass(J)}})}if(document.getElementById("index")){$("section").each(function(){var H=$(this).offset().top;var I=$(window).scrollTop();var K=$(window).height();if(I+90>H-K+K){var J=$(this).attr("id");$("body").removeClass("main topConcept product01 product02 product03 product04 product05 product06 topGift topCF topJournal instagram");$("body").addClass(J)}});$(".effect").each(function(){var J=$(this).offset().top;var H=$(window).scrollTop();var K=$(window).height();if(H>J-K+K/5){var I=$(this).attr("animate");$(this).css({opacity:"1"});$(this).addClass(I)}})}if(document.getElementById("itemDetail")){$("section").each(function(){var H=$(this).offset().top;var I=$(window).scrollTop();var K=$(window).height();if(I+300>H-K+K){var J=$(this).attr("id");$("#fixedCartWrap").removeClass("main wrap01 features scent wrap02 detail relation journal sectionBack");$("#fixedCartWrap").addClass(J)}})}}})}F()}v($("body"));function n(B){var A=B.find("a");var z=$("#closeBtn");var x=$("#menuBg");var D=0;var w;function y(){if(D==0){w=$(window).scrollTop();$("body").addClass("menu_open").css({width:"100%"});D=1}else{$("body").removeClass("menu_open").attr({style:""}).prop({scrollTop:w});D=0}}function C(){A.on({click:function(){y()}});z.on({click:function(){y()}});x.on({click:function(){y()}})}C()}n($("#humMenu"));function r(F){var E=$("#slideShow");var J=$("#slideShow li");var M;var z;var B=2000;var y=2000;var G=1;var C=[];var A=[];function H(){if(G!==1){G++}else{G=0}D(G)}function K(){z=setTimeout(H,y)}function I(){clearTimeout(z)}function w(){K()}function D(N){$(".active").removeClass("active");A[N].addClass("active");J.stop().animate({opacity:0},B);C[N].stop().animate({opacity:1},B,function(){w();G=N})}function x(N){if(G!=N){D(N);I()}}function L(){F.find("li").each(function(N){A[N]=$(this);$($(this).find("a")).on({click:function(){x(N)}})});E.find("li").each(function(N){C[N]=$(this)})}L();K()}if(document.getElementById("index")){}function b(y){var x=y.html();$("#excerpt").prepend(x);y.remove();if(document.getElementById("cartNotice")){var w=$("#cartNotice").html();$(".cart_button").append(w);$("#cartNotice").remove()}}if(document.getElementById("itemDetail")){b($("#leadTxt"))}function k(z){var y=z.find("button");var B=y.outerHeight();var x=z.find(".toggle_content");var w=0;function C(){var F=y.outerHeight();var D=x.outerHeight();if(w==0){var E=F+D+30;y.addClass("open");w=1}else{var E=F;y.removeClass("open");w=0}z.css({height:E+"px"})}function A(){z.css({height:B+"px"});y.on({click:function(){C()}})}A()}if(document.getElementById("itemDetail")){k($("#detailToggle"))}function m(z){var A=0;var w=z.find(".variation_wrap");var x=z.find(".display_wrap");var B=x.outerHeight();var y=z.find(".display_toggle");var E=y.outerHeight();function D(){var H=x.outerHeight();var F=y.outerHeight();if(A==0){var G=H+F;x.addClass("open");A=1}else{var G=H;x.removeClass("open");A=0}w.css({height:G+"px"})}function C(){w.css({height:B+"px"});x.on({click:function(){D()}})}C()}if(document.getElementById("variationToggle")){m($("#variationToggle"))}function a(x){var A=document.getElementById("cat");var w=[];function z(){var C=A.value;if(document.getElementById("itemList")){var B="https://www.komons-japan.com"+C+"#products"}else{if(document.getElementById("itemDetail")){var B="https://www.komons-japan.com"+C}}if(C!=="undefined"){location.href=B}}function y(){var C=location.hash;if(0<C.length){var B=$(C).offset().top;var F=$(window).width();if(F>1100){var D=B-100}else{var D=B-100}$("html, body").animate({scrollTop:D},0)}var E=location.search;$.each(x.find(".option-1"),function(G){w[G]=$(this).attr("links");if(w[G]=E){x.val(w[G])}});x.change(function(){z()})}y()}if(document.getElementById("itemList")){a($("#cat"))}if(document.getElementById("itemDetail")){a($("#cat"))}window.onload=function(){var z=location.hash;if(0<z.length){location.hash=z;var x=$(z).offset().top;var y=$(window).width();if(y>1100){var A=x-100}else{var A=x-60}$("html, body").animate({scrollTop:A},0)}};function f(y){var x=[];function w(D){var A=$(window).width();var C=$(x[D]).offset().top;if(A>1100){var B=C-100}else{var B=C-60}$("html, body").animate({scrollTop:B},500);return false}function z(){$.each(y.find("li a"),function(A){$(this).attr("href","javascript:void(0);");x[A]=$(this).attr("jump");$(this).on({click:function(){w(A)}})})}z()}if(document.getElementById("faq")){f($(".fmenu02"));f($("#guideNav"))}function s(A){var y=[];var z=[];var w=[];var x=[];function C(F){if(x[F]==-1||x[F]==0){z[F].addClass("active");var D=w[F].height();y[F].css({height:110+D+"px"});x[F]=1}else{z[F].removeClass("active");var E=z[F].outerHeight();y[F].css({height:E+4+"px"});x[F]=0}}function B(){$.each(A.find(".toggle_item"),function(D){y[D]=$(this);z[D]=$(this).find(".toggle_button");w[D]=$(this).find(".toggle_contents");$(this).css({height:z[D].outerHeight()+4+"px"});x[D]=-1;z[D].on({click:function(){C(D)}})})}B()}if(document.getElementById("faq")){s($("article"))}if(document.getElementById("gift")){s($("article"))}if(document.getElementById("giftList")){s($("article"))}if(document.getElementById("giftService")){s($("article"))}function c(x){function w(){var B=$("#giftOption").offset().top;var z=$(window).width();if(z>1100){var A=B-100}else{var A=B-60}$("html, body").animate({scrollTop:A},500)}function y(){x.on({click:function(){w()}})}y()}if(document.getElementById("gift")){c($("#jumpButton"))}function h(y){var x=[];var w=[];function z(){y.find("form").each(function(A){w[A]=$(this);w[A].attr("id","form"+A);x[A]=$(this).find(".cartjs_cart_in").find("input");x[A].attr("onclick","gtag_report_conversion2("+A+"); return false;");x[A].on({click:function(){return false;gtag_report_conversion2(A)}})})}z()}if(document.getElementById("gift")){h($("#productList"))}function g(w){function x(){w.addClass("fade")}x()}if(document.getElementById("index")){g($("#hLogo"))}function j(x){var z=0;function w(){if(z==0){x.removeClass("close");x.addClass("open");z=1}else{x.removeClass("open");x.addClass("close");z=0}}function y(){x.on({click:function(){w()}});$("#indexContent li a").on({click:function(){w()}})}y()}if(document.getElementById("concept")){j($("#popButton"))}function i(w){$("input").each(function(){$(this).attr("autocomplete","off")});$(".wpcf7-submit").on({click:function(){$("#confirmButton").addClass("wpcf7c-force-hide")}})}if(document.getElementById("contact")){i($("form"))}function q(B,C){var x=$(B);var z=$(C);if(z.length==0||x.length==0){return}var w=x.offset().top;var D=35;var y=$("header:first").height();var A=z.height();$(window).on("scroll load resize",function(){var E=$(window).scrollTop();if(E+y>=w){x.css("position","fixed");if(E>A){x.css("top",(y-(E-A))+"px")}else{x.css("top",y+"px")}}else{w=x.offset().top;x.css("position","absolute");x.css("top",$("#js_concept_kv").height())}})}q("#js_concept_sidebar","#concept");function p(){$('a[href^="#"]').click(function(){var w=$(this).attr("href");return u(w)})}function u(y){if(y!="#"&&y!=""){var x=$("header:first").height();var B=$(y);var A=50;var w=B.offset().top-x-A;$("html, body").animate({scrollTop:w},300,"swing")}var z=location.href.split("#");if(z.length>1){history.replaceState("","",location.pathname)}return false}p();function e(x,z){var w=$("header:first").height()+180;$(window).on("scroll load",function(){var E=$(window).scrollTop();for(var C in x){var A=x[C];$target=$(A);if($target.length==0){continue}var D=$target.offset().top;if(E+w>D){var B=$("a[href='"+A+"']").closest("li");B.siblings().removeClass("current");B.addClass("current")}}});for(var y in x){$("a[href='"+x[y]+"']").click(function(){$(z).hide()})}}e(["#concept_top","#concept_component","#concept_scent","#concept_make","#concept_design"],"#js_concept_index_sp");function o(){$(".js_toggle_btn").click(function(){var w=$($(this).data("target"));if(w.is(":visible")){w.fadeOut(100);$(this).find(".-txt_opened").show();$(this).find(".-txt_closed").hide()}else{w.fadeIn(100);$(this).find(".-txt_opened").hide();$(this).find(".-txt_closed").show()}})}o();function t(O){var P;var z=$("#optionPop");var C=$("#optionSelect");var y=$("#optionSelect02");var L=$("#fixedPopButton");var K=$("#popBg");var w=$(".mizuhiki");var J=$("#popClose");var F=$("#optionFix");var E=$("input[name='tesage']");var G=$('input[name="mizuhiki"]');var x=$("input[name='mizuhiki_option']");var N=$("#tesageDisplay");var D=$("#mizuhikiDisplay");function B(){var R=$("input[name='tesage']:checked").val();var Q=$("input[name='mizuhiki_option']:checked");if(R=="tesage"){var S=Q.attr("tesageAri")}else{var S=Q.attr("tesageNashi")}$(S).click();D.text(Q.val())}function H(){P=$(window).scrollTop();$("body").addClass("fixed");$("body").css({position:"fixed",top:-1*P});O.addClass("open")}function A(){$("body").removeClass("fixed");$("body").attr("style","");$("html, body").prop({scrollTop:P});O.removeClass("open")}function M(){var Q=$('input[name="mizuhiki"]:checked').val();var R=w.find(".mizuhiki_inner").outerHeight();if(Q=="mizuhiki"){w.addClass("active");$("input[name='mizuhiki_option']").val(["表書き無し"])}else{w.removeClass("active");$("input[name='mizuhiki_option']").val(["無し"])}}function I(){$("#6-13").click();A();C.on({click:function(){H()}});L.on({click:function(){H()}});y.on({click:function(){H()}});K.on({click:function(){A()}});J.on({click:function(){A()}});F.on({click:function(){A()}});G.on({click:function(){M();B()}});x.on({click:function(){B()}});E.on({click:function(){B()}})}I()}if(document.getElementById("itemDetail")){t($("#optionPop"))}function l(E){var z=300;var K=$("#priceRangeFilter");var D=E.find(".list_item").length;var x=D+1;var B=0;var H=100000;var y=[];var A=[];var J=[];function w(){E.stop().animate({opacity:0},z,function(){E.html("");for(var N=0;N<D;N++){if(B<J[N].price&&J[N].price<H){console.log("index:"+N);E.append(J[N].html)}}E.stop().animate({opacity:1},z)})}function M(O,N){E.stop().animate({opacity:0},z,function(){E.html("");for(var P=0;P<D;P++){if(O<J[P].price&&J[P].price<N){E.append(J[P].html)}}E.stop().animate({opacity:1},z)})}function C(){J.sort(function(O,N){if(O.price<N.price){return -1}if(O.price>N.price){return 1}return 0});w()}function G(){J.sort(function(O,N){if(O.price>N.price){return -1}if(O.price<N.price){return 1}return 0});w()}function I(){J.sort(function(O,N){if(O.number<N.number){return -1}if(O.number>N.number){return 1}return 0});w()}function F(){J.sort(function(O,N){if(O.recommend<N.recommend){return -1}if(O.recommend>N.recommend){return 1}return 0});w()}function L(){E.find(".list_item").each(function(N){$(this).attr("number",N);var P=$(this).find(".product_type");var S=$(this).find(".content_icon");var R=P.attr("recommend");$(this).attr("recommend",R);var Q=P.attr("prop").split(",");for(var O=0;O<Q.length;O++){S.append('<div class="icon"><span class="'+Q[O]+'"></span></div>')}J[N]={html:$(this),price:Number($(this).attr("price").replace(/,/g,"")),recommend:Number($(this).attr("recommend")),number:Number($(this).attr("number"))}});$("#arrayFilter").on({change:function(){const N=$(this).val();switch(N){case"recommend":F();break;case"popular":I();break;case"priceDesc":C();break;case"priceAsc":G();break;default:console.log("error")}}});$('input[name="price_filter"]').on({click:function(){var O=$(this).attr("id");if(O=="price01"){$("#price04").prop("checked",false)}if(O=="price04"){$("#price01").prop("checked",false)}y=[];A=[];var N=$('input[name="price_filter"]:checked').length;if(N!=0){$('input[name="price_filter"]:checked').each(function(P){y[P]=Number($(this).attr("minPrice"));A[P]=Number($(this).attr("maxPrice"))});B=Number(Math.min.apply(null,y));H=Number(Math.max.apply(null,A))}else{B=Number(0);H=Number(99999999)}M(B,H)}})}L()}if(document.getElementById("giftList")){l($("#giftProductList"))}if(document.getElementById("itemDetail")){$("#relatedSlider").slick({accessibility:false,infinite:false,dots:true,slidesToShow:3,centerMode:true,autoplay:false,responsive:[{breakpoint:760,settings:{slidesToShow:1,centerPadding:"10%",centerMode:false}}]})}});
