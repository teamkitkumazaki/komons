$(function(){function d(){var y="https://journal.komons-japan.com/wp-content/themes/komons-theme/img/main_slide01.jpg";function x(F){var C=location.search.substring(1);var E=$("#popBg");var H=F.find("#closeBanner");var D=F.find("#popCloseButton");console.log(C);function G(){F.addClass("open");E.on({click:function(){F.removeClass("open")}})}if(C.match(/returntop/)){}else{G()}}var z=new Image();var A=$(".first_view");var B=A.attr("src");A.attr("src","");A.on({load:function(){setTimeout(function(){$(".load_inner").addClass("delete");$("body").addClass("loaded");setTimeout(function(){$(".slide_fil").addClass("loaded");setTimeout(function(){$(".main_img").addClass("loaded");$(".main_logo").addClass("loaded");s($("#sliderBtn"))},100)},1200)},1700)}});A.attr("src",B)}if(document.getElementById("index")){d()}function w(A){var E=0;var y=$("#arrowScroll a");var C=$(".header_arrow");var D=$("#scrollTarget");function z(H){A.addClass("rolled");C.attr("id","arrowReturn");E=1}function B(){if($(".underPage").length){}else{A.removeClass("rolled");C.attr("id","arrowScroll");E=0}}function F(){if(E==0){$("html, body").animate({scrollTop:1100},700)}else{$("html, body").animate({scrollTop:0},1000)}}function x(){var H=D.offset().top;if(E==0){$("html, body").animate({scrollTop:H},700)}else{$("html, body").animate({scrollTop:0},1000)}}function G(){$(".header_arrow a").on({click:function(){if(document.getElementById("top")){F()}else{x()}}});$(window).on({scroll:function(){var H=$(window).scrollTop();if(H>100){if(E==0){z()}}else{if(E==1){B()}}if(document.getElementById("concept")){$("section").each(function(){var I=$(this).offset().top;var J=$(window).scrollTop();var L=$(window).height();if(J+90>I-L+L){var K=$(this).attr("id");$("body").removeClass("concept_top concept_component concept_scent concept_make concept_design ceoncept_links");$("body").addClass(K)}})}if(document.getElementById("index")){$("section").each(function(){var I=$(this).offset().top;var J=$(window).scrollTop();var L=$(window).height();if(J+90>I-L+L){var K=$(this).attr("id");$("body").removeClass("main topConcept product01 product02 product03 product04 product05 product06 topGift topCF topJournal instagram");$("body").addClass(K)}});$(".effect").each(function(){var K=$(this).offset().top;var I=$(window).scrollTop();var L=$(window).height();if(I>K-L+L/5){var J=$(this).attr("animate");$(this).css({opacity:"1"});$(this).addClass(J)}})}if(document.getElementById("itemDetail")){$("section").each(function(){var I=$(this).offset().top;var J=$(window).scrollTop();var L=$(window).height();if(J+300>I-L+L){var K=$(this).attr("id");$("#fixedCartWrap").removeClass("main wrap01 features scent wrap02 detail relation journal sectionBack");$("#fixedCartWrap").addClass(K)}})}}})}G()}w($("body"));function o(C){var B=C.find("a");var A=$("#humClose");var y=$("#menuBg");var E=0;var x;function z(){if(E==0){x=$(window).scrollTop();$("body").css({position:"fixed",top:-1*x});$("body").addClass("fixed");$("#slideMenuNew").addClass("open");E=1}else{$("body").removeClass("fixed");$("body").attr("style","");$("html, body").prop({scrollTop:x});$("#slideMenuNew").removeClass("open");E=0}}function D(){B.on({click:function(){z()}});A.on({click:function(){z()}});y.on({click:function(){z()}})}D()}o($("#humMenu"));function s(G){var F=$("#slideShow");var K=$("#slideShow li");var N;var A;var C=2000;var z=2000;var H=1;var D=[];var B=[];function I(){if(H!==1){H++}else{H=0}E(H)}function L(){A=setTimeout(I,z)}function J(){clearTimeout(A)}function x(){L()}function E(O){$(".active").removeClass("active");B[O].addClass("active");K.stop().animate({opacity:0},C);D[O].stop().animate({opacity:1},C,function(){x();H=O})}function y(O){if(H!=O){E(O);J()}}function M(){G.find("li").each(function(O){B[O]=$(this);$($(this).find("a")).on({click:function(){y(O)}})});F.find("li").each(function(O){D[O]=$(this)})}M();L()}if(document.getElementById("index")){}function l(y){var A=y.find('input[type="text"]');var x=y.find("button");function z(){x.on({click:function(){var B=A.val();if(B.length>1&&B!=null){location.href="https://www.komons-japan.com/?mode=srh&keyword="+B}}})}z()}l($("#searchSubmit"));function b(z){var y=z.html();$("#excerpt").prepend(y);z.remove();if(document.getElementById("cartNotice")){var x=$("#cartNotice").html();$(".cart_button").append(x);$("#cartNotice").remove()}}if(document.getElementById("itemDetail")){b($("#leadTxt"))}function k(A){var z=A.find("button");var C=z.outerHeight();var y=A.find(".toggle_content");var x=0;function D(){var G=z.outerHeight();var E=y.outerHeight();if(x==0){var F=G+E+30;z.addClass("open");x=1}else{var F=G;z.removeClass("open");x=0}A.css({height:F+"px"})}function B(){A.css({height:C+"px"});z.on({click:function(){D()}})}B()}if(document.getElementById("itemDetail")){k($("#detailToggle"))}function n(A){var B=0;var x=A.find(".variation_wrap");var y=A.find(".display_wrap");var C=y.outerHeight();var z=A.find(".display_toggle");var F=z.outerHeight();function E(){var I=y.outerHeight();var G=z.outerHeight();if(B==0){var H=I+G;y.addClass("open");B=1}else{var H=I;y.removeClass("open");B=0}x.css({height:H+"px"})}function D(){x.css({height:C+"px"});y.on({click:function(){E()}})}D()}if(document.getElementById("variationToggle")){n($("#variationToggle"))}function a(y){var B=document.getElementById("cat");var x=[];function A(){var D=B.value;if(document.getElementById("itemList")){var C="https://www.komons-japan.com"+D+"#products"}else{if(document.getElementById("itemDetail")){var C="https://www.komons-japan.com"+D}}if(D!=="undefined"){location.href=C}}function z(){var D=location.hash;if(0<D.length){var C=$(D).offset().top;var G=$(window).width();if(G>1100){var E=C-100}else{var E=C-100}$("html, body").animate({scrollTop:E},0)}var F=location.search;$.each(y.find(".option-1"),function(H){x[H]=$(this).attr("links");if(x[H]=F){y.val(x[H])}});y.change(function(){A()})}z()}if(document.getElementById("itemList")){a($("#cat"))}if(document.getElementById("itemDetail")){a($("#cat"))}window.onload=function(){var z=location.hash;if(0<z.length){location.hash=z;var x=$(z).offset().top;var y=$(window).width();if(y>1100){var A=x-100}else{var A=x-60}$("html, body").animate({scrollTop:A},0)}};function f(z){var y=[];function x(E){var B=$(window).width();var D=$(y[E]).offset().top;if(B>1100){var C=D-100}else{var C=D-60}$("html, body").animate({scrollTop:C},500);return false}function A(){$.each(z.find("li a"),function(B){$(this).attr("href","javascript:void(0);");y[B]=$(this).attr("jump");$(this).on({click:function(){x(B)}})})}A()}if(document.getElementById("faq")){f($(".fmenu02"));f($("#guideNav"))}function t(B){var z=[];var A=[];var x=[];var y=[];function D(G){if(y[G]==-1||y[G]==0){A[G].addClass("active");var E=x[G].height();z[G].css({height:110+E+"px"});y[G]=1}else{A[G].removeClass("active");var F=A[G].outerHeight();z[G].css({height:F+4+"px"});y[G]=0}}function C(){$.each(B.find(".toggle_item"),function(E){z[E]=$(this);A[E]=$(this).find(".toggle_button");x[E]=$(this).find(".toggle_contents");$(this).css({height:A[E].outerHeight()+4+"px"});y[E]=-1;A[E].on({click:function(){D(E)}})})}C()}if(document.getElementById("faq")){t($("article"))}if(document.getElementById("gift")){t($("article"))}if(document.getElementById("giftList")){t($("article"))}if(document.getElementById("giftService")){t($("article"))}function c(y){function x(){var C=$("#giftOption").offset().top;var A=$(window).width();if(A>1100){var B=C-100}else{var B=C-60}$("html, body").animate({scrollTop:B},500)}function z(){y.on({click:function(){x()}})}z()}if(document.getElementById("gift")){c($("#jumpButton"))}function h(z){var y=[];var x=[];function A(){z.find("form").each(function(B){x[B]=$(this);x[B].attr("id","form"+B);y[B]=$(this).find(".cartjs_cart_in").find("input");y[B].attr("onclick","gtag_report_conversion2("+B+"); return false;");y[B].on({click:function(){return false;gtag_report_conversion2(B)}})})}A()}if(document.getElementById("gift")){h($("#productList"))}function g(x){function y(){x.addClass("fade")}y()}if(document.getElementById("index")){g($("#hLogo"))}function j(y){var A=0;function x(){if(A==0){y.removeClass("close");y.addClass("open");A=1}else{y.removeClass("open");y.addClass("close");A=0}}function z(){y.on({click:function(){x()}});$("#indexContent li a").on({click:function(){x()}})}z()}if(document.getElementById("concept")){j($("#popButton"))}function i(x){$("input").each(function(){$(this).attr("autocomplete","off")});$(".wpcf7-submit").on({click:function(){$("#confirmButton").addClass("wpcf7c-force-hide")}})}if(document.getElementById("contact")){i($("form"))}function r(C,D){var y=$(C);var A=$(D);if(A.length==0||y.length==0){return}var x=y.offset().top;var E=35;var z=$("header:first").height();var B=A.height();$(window).on("scroll load resize",function(){var F=$(window).scrollTop();if(F+z>=x){y.css("position","fixed");if(F>B){y.css("top",(z-(F-B))+"px")}else{y.css("top",z+"px")}}else{x=y.offset().top;y.css("position","absolute");y.css("top",$("#js_concept_kv").height())}})}r("#js_concept_sidebar","#concept");function q(){$('a[href^="#"]').click(function(){var x=$(this).attr("href");return v(x)})}function v(z){if(z!="#"&&z!=""){var y=$("header:first").height();var C=$(z);var B=50;var x=C.offset().top-y-B;$("html, body").animate({scrollTop:x},300,"swing")}var A=location.href.split("#");if(A.length>1){history.replaceState("","",location.pathname)}return false}q();function e(y,A){var x=$("header:first").height()+180;$(window).on("scroll load",function(){var F=$(window).scrollTop();for(var D in y){var B=y[D];$target=$(B);if($target.length==0){continue}var E=$target.offset().top;if(F+x>E){var C=$("a[href='"+B+"']").closest("li");C.siblings().removeClass("current");C.addClass("current")}}});for(var z in y){$("a[href='"+y[z]+"']").click(function(){$(A).hide()})}}e(["#concept_top","#concept_component","#concept_scent","#concept_make","#concept_design"],"#js_concept_index_sp");function p(){$(".js_toggle_btn").click(function(){var x=$($(this).data("target"));if(x.is(":visible")){x.fadeOut(100);$(this).find(".-txt_opened").show();$(this).find(".-txt_closed").hide()}else{x.fadeIn(100);$(this).find(".-txt_opened").hide();$(this).find(".-txt_closed").show()}})}p();function u(P){var Q;var A=$("#optionPop");var D=$("#optionSelect");var z=$("#optionSelect02");var M=$("#fixedPopButton");var L=$("#popBg");var x=$(".mizuhiki");var K=$("#popClose");var G=$("#optionFix");var F=$("input[name='tesage']");var H=$('input[name="mizuhiki"]');var y=$("input[name='mizuhiki_option']");var O=$("#tesageDisplay");var E=$("#mizuhikiDisplay");function C(){var S=$("input[name='tesage']:checked").val();var R=$("input[name='mizuhiki_option']:checked");if(S=="tesage"){var T=R.attr("tesageAri")}else{var T=R.attr("tesageNashi")}$(T).click();E.text(R.val())}function I(){Q=$(window).scrollTop();$("body").addClass("fixed");$("body").css({position:"fixed",top:-1*Q});P.addClass("open")}function B(){$("body").removeClass("fixed");$("body").attr("style","");$("html, body").prop({scrollTop:Q});P.removeClass("open")}function N(){var R=$('input[name="mizuhiki"]:checked').val();var S=x.find(".mizuhiki_inner").outerHeight();if(R=="mizuhiki"){x.addClass("active");$("input[name='mizuhiki_option']").val(["表書き無し"])}else{x.removeClass("active");$("input[name='mizuhiki_option']").val(["無し"])}}function J(){$("#6-13").click();B();D.on({click:function(){I()}});M.on({click:function(){I()}});z.on({click:function(){I()}});L.on({click:function(){B()}});K.on({click:function(){B()}});G.on({click:function(){B()}});H.on({click:function(){N();C()}});y.on({click:function(){C()}});F.on({click:function(){C()}})}J()}if(document.getElementById("itemDetail")){u($("#optionPop"))}function m(F){var A=300;var L=$("#priceRangeFilter");var E=F.find(".list_item").length;var y=E+1;var C=0;var I=100000;var z=[];var B=[];var K=[];function x(){F.stop().animate({opacity:0},A,function(){F.html("");for(var O=0;O<E;O++){if(C<K[O].price&&K[O].price<I){console.log("index:"+O);F.append(K[O].html)}}F.stop().animate({opacity:1},A)})}function N(P,O){F.stop().animate({opacity:0},A,function(){F.html("");for(var Q=0;Q<E;Q++){if(P<K[Q].price&&K[Q].price<O){F.append(K[Q].html)}}F.stop().animate({opacity:1},A)})}function D(){K.sort(function(P,O){if(P.price<O.price){return -1}if(P.price>O.price){return 1}return 0});x()}function H(){K.sort(function(P,O){if(P.price>O.price){return -1}if(P.price<O.price){return 1}return 0});x()}function J(){K.sort(function(P,O){if(P.number<O.number){return -1}if(P.number>O.number){return 1}return 0});x()}function G(){K.sort(function(P,O){if(P.recommend<O.recommend){return -1}if(P.recommend>O.recommend){return 1}return 0});x()}function M(){F.find(".list_item").each(function(O){$(this).attr("number",O);var Q=$(this).find(".product_type");var T=$(this).find(".content_icon");var S=Q.attr("recommend");$(this).attr("recommend",S);var R=Q.attr("prop").split(",");for(var P=0;P<R.length;P++){T.append('<div class="icon"><span class="'+R[P]+'"></span></div>')}K[O]={html:$(this),price:Number($(this).attr("price").replace(/,/g,"")),recommend:Number($(this).attr("recommend")),number:Number($(this).attr("number"))}});$("#arrayFilter").on({change:function(){const O=$(this).val();switch(O){case"recommend":G();break;case"popular":J();break;case"priceDesc":D();break;case"priceAsc":H();break;default:console.log("error")}}});$('input[name="price_filter"]').on({click:function(){var P=$(this).attr("id");if(P=="price01"){$("#price04").prop("checked",false)}if(P=="price04"){$("#price01").prop("checked",false)}z=[];B=[];var O=$('input[name="price_filter"]:checked').length;if(O!=0){$('input[name="price_filter"]:checked').each(function(Q){z[Q]=Number($(this).attr("minPrice"));B[Q]=Number($(this).attr("maxPrice"))});C=Number(Math.min.apply(null,z));I=Number(Math.max.apply(null,B))}else{C=Number(0);I=Number(99999999)}N(C,I)}})}M()}if(document.getElementById("giftList")){m($("#giftProductList"))}if(document.getElementById("itemDetail")){$("#relatedSlider").slick({accessibility:false,infinite:false,dots:true,slidesToShow:3,centerMode:true,autoplay:false,responsive:[{breakpoint:760,settings:{slidesToShow:1,centerPadding:"10%",centerMode:false}}]})}});
