$(function(){function d(){var v="https://journal.komons-japan.com/wp-content/themes/komons-theme/img/main_slide01.jpg";var w=new Image();var x=$(".first_view");var y=x.attr("src");x.attr("src","");x.on({load:function(){setTimeout(function(){$(".load_inner").addClass("delete");$("body").addClass("loaded");setTimeout(function(){$(".slide_fil").addClass("loaded");setTimeout(function(){$(".main_img").addClass("loaded");$(".main_logo").addClass("loaded");q($("#sliderBtn"))},100)},1200)},1700)}});x.attr("src",y)}if(document.getElementById("index")){d()}function u(y){var C=0;var w=$("#arrowScroll a");var A=$(".header_arrow");var B=$("#scrollTarget");function x(F){y.addClass("rolled");A.attr("id","arrowReturn");C=1}function z(){if($(".underPage").length){}else{y.removeClass("rolled");A.attr("id","arrowScroll");C=0}}function D(){if(C==0){$("html, body").animate({scrollTop:1100},700)}else{$("html, body").animate({scrollTop:0},1000)}}function v(){var F=B.offset().top;if(C==0){$("html, body").animate({scrollTop:F},700)}else{$("html, body").animate({scrollTop:0},1000)}}function E(){$(".header_arrow a").on({click:function(){if(document.getElementById("top")){D()}else{v()}}});$(window).on({scroll:function(){var F=$(window).scrollTop();if(F>100){if(C==0){x()}}else{if(C==1){z()}}if(document.getElementById("concept")){$("section").each(function(){var G=$(this).offset().top;var H=$(window).scrollTop();var J=$(window).height();if(H+90>G-J+J){var I=$(this).attr("id");$("body").removeClass("concept_top concept_component concept_scent concept_make concept_design ceoncept_links");$("body").addClass(I)}})}if(document.getElementById("index")){$("section").each(function(){var G=$(this).offset().top;var H=$(window).scrollTop();var J=$(window).height();if(H+90>G-J+J){var I=$(this).attr("id");$("body").removeClass("main topConcept product01 product02 product03 product04 product05 product06 topGift topCF topJournal instagram");$("body").addClass(I)}});$(".effect").each(function(){var I=$(this).offset().top;var G=$(window).scrollTop();var J=$(window).height();if(G>I-J+J/5){var H=$(this).attr("animate");$(this).css({opacity:"1"});$(this).addClass(H)}})}}})}E()}u($("body"));function m(A){var z=A.find("a");var y=$("#closeBtn");var w=$("#menuBg");var C=0;var v;function x(){if(C==0){v=$(window).scrollTop();$("body").addClass("menu_open").css({width:"100%"});C=1}else{$("body").removeClass("menu_open").attr({style:""}).prop({scrollTop:v});C=0}}function B(){z.on({click:function(){x()}});y.on({click:function(){x()}});w.on({click:function(){x()}})}B()}m($("#humMenu"));function q(E){var D=$("#slideShow");var I=$("#slideShow li");var L;var y;var A=2000;var x=2000;var F=1;var B=[];var z=[];function G(){if(F!==1){F++}else{F=0}C(F)}function J(){y=setTimeout(G,x)}function H(){clearTimeout(y)}function v(){J()}function C(M){$(".active").removeClass("active");z[M].addClass("active");I.stop().animate({opacity:0},A);B[M].stop().animate({opacity:1},A,function(){v();F=M})}function w(M){if(F!=M){C(M);H()}}function K(){E.find("li").each(function(M){z[M]=$(this);$($(this).find("a")).on({click:function(){w(M)}})});D.find("li").each(function(M){B[M]=$(this)})}K();J()}if(document.getElementById("index")){}function b(x){var w=x.html();$("#excerpt").prepend(w);x.remove();if(document.getElementById("cartNotice")){var v=$("#cartNotice").html();$(".cart_button").append(v);$("#cartNotice").remove()}}if(document.getElementById("itemDetail")){b($("#leadTxt"))}function l(y){var z=0;var v=y.find(".variation_wrap");var w=y.find(".display_wrap");var A=w.outerHeight();var x=y.find(".display_toggle");var D=x.outerHeight();function C(){var G=w.outerHeight();var E=x.outerHeight();if(z==0){var F=G+E;w.addClass("open");z=1}else{var F=G;w.removeClass("open");z=0}v.css({height:F+"px"})}function B(){v.css({height:A+"px"});w.on({click:function(){C()}})}B()}if(document.getElementById("variationToggle")){l($("#variationToggle"))}function a(w){var z=document.getElementById("cat");var v=[];function y(){var B=z.value;if(document.getElementById("itemList")){var A="https://www.komons-japan.com"+B+"#products"}else{if(document.getElementById("itemDetail")){var A="https://www.komons-japan.com"+B}}if(B!=="undefined"){location.href=A}}function x(){var B=location.hash;if(0<B.length){var A=$(B).offset().top;var E=$(window).width();if(E>1100){var C=A-100}else{var C=A-100}$("html, body").animate({scrollTop:C},0)}var D=location.search;$.each(w.find(".option-1"),function(F){v[F]=$(this).attr("links");if(v[F]=D){w.val(v[F])}});w.change(function(){y()})}x()}if(document.getElementById("itemList")){a($("#cat"))}if(document.getElementById("itemDetail")){a($("#cat"))}window.onload=function(){var y=location.hash;if(0<y.length){location.hash=y;var v=$(y).offset().top;var x=$(window).width();if(x>1100){var z=v-100}else{var z=v-60}$("html, body").animate({scrollTop:z},0)}};function f(x){var w=[];function v(C){var z=$(window).width();var B=$(w[C]).offset().top;if(z>1100){var A=B-100}else{var A=B-60}$("html, body").animate({scrollTop:A},500);return false}function y(){$.each(x.find("li a"),function(z){$(this).attr("href","javascript:void(0);");w[z]=$(this).attr("jump");$(this).on({click:function(){v(z)}})})}y()}if(document.getElementById("faq")){f($(".fmenu02"));f($("#guideNav"))}function r(z){var x=[];var y=[];var v=[];var w=[];function B(E){if(w[E]==-1||w[E]==0){y[E].addClass("active");var C=v[E].height();x[E].css({height:110+C+"px"});w[E]=1}else{y[E].removeClass("active");var D=y[E].outerHeight();x[E].css({height:D+4+"px"});w[E]=0}}function A(){$.each(z.find(".toggle_item"),function(C){x[C]=$(this);y[C]=$(this).find(".toggle_button");v[C]=$(this).find(".toggle_contents");$(this).css({height:y[C].outerHeight()+4+"px"});w[C]=-1;y[C].on({click:function(){B(C)}})})}A()}if(document.getElementById("faq")){r($("article"))}if(document.getElementById("gift")){r($("article"))}if(document.getElementById("giftList")){r($("article"))}if(document.getElementById("giftService")){r($("article"))}function c(w){function v(){var A=$("#giftOption").offset().top;var y=$(window).width();if(y>1100){var z=A-100}else{var z=A-60}$("html, body").animate({scrollTop:z},500)}function x(){w.on({click:function(){v()}})}x()}if(document.getElementById("gift")){c($("#jumpButton"))}function h(x){var w=[];var v=[];function y(){x.find("form").each(function(z){v[z]=$(this);v[z].attr("id","form"+z);w[z]=$(this).find(".cartjs_cart_in").find("input");w[z].attr("onclick","gtag_report_conversion2("+z+"); return false;");w[z].on({click:function(){return false;gtag_report_conversion2(z)}})})}y()}if(document.getElementById("gift")){h($("#productList"))}function g(v){function w(){v.addClass("fade")}w()}if(document.getElementById("index")){g($("#hLogo"))}function j(w){var y=0;function v(){if(y==0){w.removeClass("close");w.addClass("open");y=1}else{w.removeClass("open");w.addClass("close");y=0}}function x(){w.on({click:function(){v()}});$("#indexContent li a").on({click:function(){v()}})}x()}if(document.getElementById("concept")){j($("#popButton"))}function i(v){$("input").each(function(){$(this).attr("autocomplete","off")});$(".wpcf7-submit").on({click:function(){$("#confirmButton").addClass("wpcf7c-force-hide")}})}if(document.getElementById("contact")){i($("form"))}function p(A,B){var w=$(A);var y=$(B);if(y.length==0||w.length==0){return}var v=w.offset().top;var C=35;var x=$("header:first").height();var z=y.height();$(window).on("scroll load resize",function(){var D=$(window).scrollTop();if(D+x>=v){w.css("position","fixed");if(D>z){w.css("top",(x-(D-z))+"px")}else{w.css("top",x+"px")}}else{v=w.offset().top;w.css("position","absolute");w.css("top",$("#js_concept_kv").height())}})}p("#js_concept_sidebar","#concept");function o(){$('a[href^="#"]').click(function(){var v=$(this).attr("href");return t(v)})}function t(x){if(x!="#"&&x!=""){var w=$("header:first").height();var A=$(x);var z=50;var v=A.offset().top-w-z;$("html, body").animate({scrollTop:v},300,"swing")}var y=location.href.split("#");if(y.length>1){history.replaceState("","",location.pathname)}return false}o();function e(w,y){var v=$("header:first").height()+180;$(window).on("scroll load",function(){var D=$(window).scrollTop();for(var B in w){var z=w[B];$target=$(z);if($target.length==0){continue}var C=$target.offset().top;if(D+v>C){var A=$("a[href='"+z+"']").closest("li");A.siblings().removeClass("current");A.addClass("current")}}});for(var x in w){$("a[href='"+w[x]+"']").click(function(){$(y).hide()})}}e(["#concept_top","#concept_component","#concept_scent","#concept_make","#concept_design"],"#js_concept_index_sp");function n(){$(".js_toggle_btn").click(function(){var v=$($(this).data("target"));if(v.is(":visible")){v.fadeOut(100);$(this).find(".-txt_opened").show();$(this).find(".-txt_closed").hide()}else{v.fadeIn(100);$(this).find(".-txt_opened").hide();$(this).find(".-txt_closed").show()}})}n();function s(M){var N;var y=$("#optionPop");var B=$("#optionSelect");var x=$("#optionSelect02");var J=$("#popBg");var v=$(".mizuhiki");var I=$("#popClose");var E=$("#optionFix");var D=$("input[name='tesage']");var F=$('input[name="mizuhiki"]');var w=$("input[name='mizuhiki_option']");var L=$("#tesageDisplay");var C=$("#mizuhikiDisplay");function A(){var P=$("input[name='tesage']:checked").val();var O=$("input[name='mizuhiki_option']:checked");if(P=="tesage"){var Q=O.attr("tesageAri")}else{var Q=O.attr("tesageNashi")}$(Q).click();C.text(O.val())}function G(){N=$(window).scrollTop();$("body").addClass("fixed");$("body").css({position:"fixed",top:-1*N});M.addClass("open")}function z(){$("body").removeClass("fixed");$("body").attr("style","");$("html, body").prop({scrollTop:N});M.removeClass("open")}function K(){var O=$('input[name="mizuhiki"]:checked').val();var P=v.find(".mizuhiki_inner").outerHeight();if(O=="mizuhiki"){v.addClass("active");$("input[name='mizuhiki_option']").val(["表書き無し"])}else{v.removeClass("active");$("input[name='mizuhiki_option']").val(["無し"])}}function H(){z();B.on({click:function(){G()}});x.on({click:function(){G()}});J.on({click:function(){z()}});I.on({click:function(){z()}});E.on({click:function(){z()}});F.on({click:function(){K();A()}});w.on({click:function(){A()}});D.on({click:function(){A()}})}H()}if(document.getElementById("itemDetail")){s($("#optionPop"))}function k(C){var x=300;var I=$("#priceRangeFilter");var B=C.find(".list_item").length;var z=0;var F=10000;var w=[];var y=[];var H=[];function v(){C.stop().animate({opacity:0},x,function(){C.html("");for(var L=0;L<B;L++){if(z<H[L].price&&H[L].price<F){C.append(H[L].html)}}C.stop().animate({opacity:1},x)})}function K(M,L){C.stop().animate({opacity:0},x,function(){C.html("");for(var N=0;N<B;N++){if(M<H[N].price&&H[N].price<L){C.append(H[N].html)}}C.stop().animate({opacity:1},x)})}function A(){H.sort(function(M,L){if(M.price<L.price){return -1}if(M.price>L.price){return 1}return 0});v()}function E(){H.sort(function(M,L){if(M.price>L.price){return -1}if(M.price<L.price){return 1}return 0});v()}function G(){H.sort(function(M,L){if(M.number<L.number){return -1}if(M.number>L.number){return 1}return 0});v()}function D(){H.sort(function(M,L){if(M.recommend<L.recommend){return -1}if(M.recommend>L.recommend){return 1}return 0});v()}function J(){C.find(".list_item").each(function(L){$(this).attr("number",L);H[L]={html:$(this),price:Number($(this).attr("price")),recommend:Number($(this).attr("recommend")),number:Number($(this).attr("number"))}});$("#arrayFilter").on({change:function(){const L=$(this).val();switch(L){case"recommend":D();break;case"popular":G();break;case"priceDesc":A();break;case"priceAsc":E();break;default:console.log("error")}}});$('input[name="price_filter"]').on({click:function(){var M=$(this).attr("id");if(M=="price01"){$("#price04").prop("checked",false)}if(M=="price04"){$("#price01").prop("checked",false)}w=[];y=[];var L=$('input[name="price_filter"]:checked').length;if(L!=0){$('input[name="price_filter"]:checked').each(function(N){w[N]=Number($(this).attr("minPrice"));y[N]=Number($(this).attr("maxPrice"))});z=Number(Math.min.apply(null,w));F=Number(Math.max.apply(null,y))}else{z=Number(0);F=Number(99999999)}K(z,F)}})}J()}if(document.getElementById("giftList")){k($("#giftProductList"))}if(document.getElementById("itemDetail")){$("#relatedSlider").slick({accessibility:false,infinite:false,dots:true,slidesToShow:3,centerMode:true,autoplay:false,responsive:[{breakpoint:760,settings:{slidesToShow:1,centerPadding:"10%",centerMode:false}}]})}});
